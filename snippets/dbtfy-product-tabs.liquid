{%- comment -%}Please do not edit this file. Any modification can be lost as it is automatically updated by Debutify{%- endcomment -%}
{%- if section.blocks.size > 0 -%}
<div class="dbtfy dbtfy-product_tabs"
     data-sticky-header="{{settings.sticky_header}}"
     data-sticky-addtocart-position="{{settings.dbtfy_sticky_addtocart_position}}">

  <div id="ProductTabs" class="{{ section.settings.dbtfy_product_tabs_size }}-product_tabs">
    <div class="wrapper-product_tabs">

      <!-- Blocks -->
      {% for block in section.blocks %}
        {% capture tab_start %}
          <div class="item-product_tabs item-product_tabs-{{ block.id }}" {{ block.shopify_attributes }}>
            <div class="header-wrapper-product_tabs header-wrapper-product_tabs-{{ block.id }}  {% if forloop.index == 1 and section.settings.dbtfy_product_tabs_first %} active{% endif %}">
              {% if block.settings.dbtfy_product_tabs_icon != empty %}
              <span class="fas fa-{{ block.settings.dbtfy_product_tabs_icon }} fa-fw icon-product_tabs"></span>
              {% endif %}
              <span class="header-title-product_tabs">{{ block.settings.dbtfy_product_tabs_title }}</span>
              {% if block.settings.dbtfy_product_tabs_review and block.type == "reviews" %}
              {% include "review-badge", badge_template: "product" %}
              {% endif %}
            </div>
            <div class="content-wrapper-product_tabs animated fadeIn">{{ block.settings.text }}
        {% endcapture %}
        {% capture tab_end %}
            </div>
          </div>
        {% endcapture %}

        {% if block.type == "description" and product.description != blank %}
          {{ tab_start }}
          <div class="product-single__description rte" itemprop="description">
            {{ product.description }}
          </div>
          {{ tab_end }}
        {% endif %}

        {% if block.type == "reviews" and settings.review_widget == "review_widget_tab" %}
          {{ tab_start }}
          {% include "review-widget" %}
          {{ tab_end }}
        {% endif %}

        {% if block.type == "text" %}
          {% assign valid_tab = false %}


          <!-- type -->
          {% if block.settings.dbtfy_product_tabs_type != blank %}
            {% assign type_list = block.settings.dbtfy_product_tabs_type | split: "," %}
            {% for type in type_list %}
              {% if product.type contains type %}
                {% assign valid_tab = true %}
              {% endif %}
            {% endfor %}
          {% endif %}

          <!-- tag -->
          {% if block.settings.dbtfy_product_tabs_tag != blank %}
            {% assign tag_list = block.settings.dbtfy_product_tabs_tag | split: "," %}
            {% for tag in tag_list %}
              {% if product.tags contains tag %}
                {% assign valid_tab = true %}
              {% endif %}
            {% endfor %}
          {% endif %}

          <!-- product -->
          {% assign product_filter = all_products[block.settings.dbtfy_product_tabs_product] %}
          {% if product_filter != empty %}
            {% if product.handle == product_filter.handle %}
              {% assign valid_tab = true %}
            {% endif %}
      	  {% endif %}

          <!-- collection -->
          {% if block.settings.dbtfy_product_tabs_collection != empty %}
            {% for collection in product.collections %}
              {% if collection.handle == block.settings.dbtfy_product_tabs_collection %}
                {% assign valid_tab = true %}
                {% break %}
              {% endif %}
            {% endfor %}
          {% endif %}

          {% if block.settings.dbtfy_product_tabs_product == empty and block.settings.dbtfy_product_tabs_type == empty and block.settings.dbtfy_product_tabs_tag == empty and block.settings.dbtfy_product_tabs_collection == empty %}
            {% assign valid_tab = true %}
          {% endif %}

      	  {% if valid_tab %}
            {{ tab_start }}
            <div class="rte {{ block.settings.text_alignment }}">
              {% unless block.settings.dbtfy_product_tabs_text == blank %}
              {{ block.settings.dbtfy_product_tabs_text }}
              {% endunless %}

              {% if block.settings.dbtfy_product_tabs_image %}
              <div class="image-wrapper" style="padding-top:{{ 1 | divided_by: block.settings.dbtfy_product_tabs_image.aspect_ratio | times: 100}}%;">
                {% assign img_url = block.settings.dbtfy_product_tabs_image | img_url: "1x1" | replace: "_1x1.", "_{width}x." %}
                <img class="image lazyload"
                     src="{{ block.settings.dbtfy_product_tabs_image | img_url: "300x300" }}"
                     data-src="{{ img_url }}"
                     data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                     data-aspectratio="{{ block.settings.dbtfy_product_tabs_image.aspect_ratio }}"
                     data-sizes="auto"
                     alt="{{ block.settings.dbtfy_product_tabs_image.alt | escape }}">
              </div>
              {% endif %}

              {% if block.settings.dbtfy_product_tabs_html != empty %}
                {{ block.settings.dbtfy_product_tabs_html }}
              {% endif %}

            </div>
            {{ tab_end }}
          {% endif %}

        {% endif %}

      {% endfor %}

    </div>
  </div>
</div>
{%- endif -%}

<script>
  $(document).ready(function() {
    $('#shopify-section-product-description .header-wrapper-product_tabs').on('click', function(){
      if($(this).hasClass('active')){
      	$(this).removeClass('active');
      }
      else{
      	$('#shopify-section-product-description .header-wrapper-product_tabs').removeClass('active');
        $(this).addClass('active');
      }
    });
  });
</script>